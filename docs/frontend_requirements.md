# フロントエンド要件仕様書

> AI秘書システム「Done」のフロントエンド要件

---

## 1. 基本情報

### 1.1 対象ユーザー
まずは自分が満足するものを作ってから一般公開したい。

### 1.2 対応デバイス
- **優先**: PC（デスクトップ）
- **将来対応**: スマートフォン（近い将来、十分に使えるようにしたい）

→ **デスクトップファーストで設計し、レスポンシブ対応を考慮した実装**

---

## 2. 画面一覧

| 画面名 | 優先度 | 説明 |
|--------|--------|------|
| ログイン画面 | MVP | 認証画面 |
| ダンとのチャット画面（メイン画面） | MVP | AI秘書との1対1チャット |
| チャットwithダンの画面 | MVP | 友達（人間）とのチャット |
| 通知コンポーネント | MVP | 右下の展開可能な通知エリア |
| 設定画面 | 未定 | 要確認 |
| タスク実行状況画面 | 未定 | 要確認 |

---

## 3. 各画面の詳細

### 3.1 ログイン画面

#### 認証方法
- メールアドレス + パスワード

#### セッション維持
- できるだけ長くログイン状態を維持したい
- → **リフレッシュトークンで長期セッション（1週間〜1ヶ月程度）を実装**

#### 検討事項（要回答）
Google/Apple/GitHub などのソーシャルログインについて提案が必要。

---

### 3.2 ダンとのチャット画面（メイン画面）

#### UIイメージ
**ChatGPT / Gemini / Claude のようなLLMチャットUI**

#### レイアウト（PC）
```
┌─────────────────────────────────────────────────────────┐
│ ┌──────────┐ ┌────────────────────────────────────────┐ │
│ │          │ │                                        │ │
│ │ サイド   │ │                                        │ │
│ │ バー     │ │         チャットエリア                  │ │
│ │          │ │                                        │ │
│ │ (10%)    │ │         (90%)                          │ │
│ │          │ │                                        │ │
│ │ ・新規   │ │                                        │ │
│ │ ・履歴1  │ │                                        │ │
│ │ ・履歴2  │ │                            ┌─────────┐ │ │
│ │ ・履歴3  │ │                            │ 通知    │ │ │
│ │   ...    │ │                            │ コンポ  │ │ │
│ └──────────┘ └────────────────────────────┴─────────┴─┘ │
└─────────────────────────────────────────────────────────┘
```

#### サイドバー機能
- チャット履歴一覧を表示
- **新しい会話ほど上部に表示**
- 各履歴に×ボタンでチャット削除可能
- 新規チャット作成ボタン

#### チャットエリア機能
- ダンとのメッセージ送受信
- リアルタイム更新（WebSocket）
- 過去のやり取りをスクロールで遡れる

#### 通知コンポーネント（右下）
- 展開/折りたたみ可能
- 詳細は「3.4 通知コンポーネント」を参照

---

### 3.3 チャットwithダンの画面（友達とのチャット）

#### UIイメージ
**LINEのようなメッセージングUI**

#### レイアウト（PC）
```
┌─────────────────────────────────────────────────────────┐
│ ┌──────────┐ ┌────────────────────────────────────────┐ │
│ │          │ │ [友達名]              [AI: ON/OFF]     │ │
│ │ 友だち   │ ├────────────────────────────────────────┤ │
│ │ 一覧     │ │                                        │ │
│ │          │ │         チャットエリア                  │ │
│ │ (10%)    │ │                                        │ │
│ │          │ │         (90%)                          │ │
│ │ ・友達A  │ │                                        │ │
│ │ ・友達B  │ │                                        │ │
│ │ ・友達C  │ │                                        │ │
│ │   ...    │ │                                        │ │
│ └──────────┘ └────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────┘
```

#### サイドバー機能
- 友だち一覧を表示
- **新メッセージが届いた友達は最上部に表示**
- 未読バッジ表示

#### チャットエリア機能
- 友達とのメッセージ送受信
- リアルタイム更新（WebSocket）
- **通知コンポーネントは非表示**

#### AI介入機能（重要）

**ON/OFFトグル**
- 友達とのチャットごとにAI介入のON/OFFを選択可能
- 相手の設定とは独立（自分ON・相手OFF、両方ONなど可能）

**ONの場合**
- 相手からのメッセージに対してダン（AI）が代わりにコミュニケーション
- ユーザーが途中でOFFからONにすると、続きからダンが対応

**OFFの場合**
- ユーザー自身がメッセージを返信

#### ダンの記憶共有
- ダンは**単一の人格**として全てのチャット（メイン画面・友達チャット）の記憶を共有
- メイン画面で依頼したタスクAに関連するメッセージが友達から届いた場合：
  - → Aについて話している適切なチャットに通知を振り分け
- メイン画面と無関係の内容の場合：
  - → メイン画面の通知コンポーネントに通知

#### AIの動作フロー
1. **基本**: メイン画面から操作（タスクに基づいて必要な相手にメッセージ送信）
2. **引き継ぎ**: チャットwithダン画面でユーザーが始めた会話をダンが引き継ぐことも可能
   - 例: ダンONでユーザーがメッセージ送信 → 相手の返信はダンが対応
   - 例: OFFで会話中 → ONに切り替え → 続きはダンが対応

---

### 3.4 通知コンポーネント

#### 配置
- メイン画面の**右下**
- **展開/折りたたみ可能**

#### 通知内容
- 紐づいているメールアドレスで検知した請求書・案内
- メイン画面で話していないが対応が必要な件
- 承認待ちのタスク

#### インタラクション
```
┌─────────────────────────────┐
│ 📬 通知 (3件)          [▼] │  ← クリックで展開
├─────────────────────────────┤
│ ┌─────────────────────────┐ │
│ │ 📄 請求書: ○○株式会社   │ │  ← クリックで詳細表示
│ │ ¥50,000 / 期限: 1/15   │ │
│ └─────────────────────────┘ │
│ ┌─────────────────────────┐ │
│ │ ✉️ 新規案内: △△サービス  │ │
│ └─────────────────────────┘ │
│ ┌─────────────────────────┐ │
│ │ ⚡ タスク確認: 予約変更  │ │
│ └─────────────────────────┘ │
└─────────────────────────────┘
```

#### 詳細表示時の機能
- タスク/通知の内容表示
- **承認ボタン**
- **編集ボタン**
- **小チャット機能**: その件についてユーザーが自然言語で質問・指示可能

---

## 4. 認証方式の提案（AI回答）

### 推奨: メール + パスワード + オプションでソーシャルログイン

| 方式 | メリット | デメリット |
|------|----------|------------|
| **メール + パスワード** | シンプル、依存なし | パスワード管理の手間 |
| **Googleログイン** | 多くのユーザーが持っている | Google依存 |
| **Apple/GitHub** | 特定ユーザー層には便利 | 実装コスト増 |

### 提案

**MVP（最初のリリース）:**
- メール + パスワードのみ

**Phase 2（余裕があれば）:**
- Googleログイン追加（Supabase Authで比較的簡単に追加可能）

**理由:**
- まずは自分用なのでシンプルに
- 一般公開時にGoogleログインを追加すればカバー率が高い
- Apple/GitHubは必要に応じて後から

---

## 5. 未確認事項（要回答）

以下について追加で教えてください：

### 5.1 タスク実行状況画面
タスク（例: 新幹線予約、支払い実行など）の実行中に進捗を見る画面は必要ですか？
- 例: 「ログイン中...」「フォーム入力中...」「完了！」のようなステップ表示
- スクリーンショット表示

### 5.2 設定画面
設定画面では何ができるべきですか？
- プロフィール編集（名前、アイコン）
- パスワード変更
- 保存済みログイン情報の管理
- Gmail連携設定
- その他

### 5.3 デザインの方向性
- 全体的な雰囲気（シンプル/モダン/かわいい など）
- ダークモード対応の有無
- 色の好み

### 5.4 新規登録画面
ログイン画面とは別に新規登録画面は必要ですか？
- 招待制にするか、誰でも登録できるようにするか

---

## 6. 補足情報

### 記入日
2024年12月29日

### ステータス
作成中（追加情報待ち）
